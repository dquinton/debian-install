---
layout: default
description: Ranger key-binds and configuration - by D Quinton
keywords: debian, ranger, keybinds, file manager, terminal
title: Ranger
id: config
---

<div class="onpage">
  <ul>
    <li>
        On this page &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp; <a href="#">TOP</a>
             <ul>
                <li><a href="#1">Install</a></li>
                <li><a href="#2">Features</a></li>
                <li><a href="#3">Default key-bindings</a></li>
                <li><a href="#4">My keybindings</a></li>
                <li><a href="#5">Notes on mapping keys</a></li>
                <li><a href="#6">Useful native commands</a></li>
                <li><a href="#6a">Adjusting rifle</a></li>
                <li><a href="#7">Inline image preview</a></li>
                <li><a href="#8">Refine info for images</a></li>
                <li><a href="#9">Refine info for audio/video</a></li>
                <li><a href="#10">Integrate system trash</a></li>
                <li><a href="#11">UI enhancements</a></li>
                <li><a href="#12">Mounting an android device</a></li>
             </ul>
    </li>
  </ul>
</div>

<div class="parent"><a href="../configure.html">Configure</a> ></div>


<div class="pagemenu">
<table cellpadding="5"><tr><td>
 <ul type= "none">
                <li><a href="#1">Install</a></li>
                <li><a href="#2">Features</a></li>
                <li><a href="#3">Default key-bindings</a></li>
                <li><a href="#4">My keybindings</a></li>
                <li><a href="#5">Notes on mapping keys</a></li>
                <li><a href="#6">Useful native commands</a></li>
                <li><a href="#6a">Adjusting rifle</a></li>
                <li><a href="#7">Inline image preview</a></li>
                <li><a href="#8">Refine info for images</a></li>
                <li><a href="#9">Refine info for audio/video</a></li>
                <li><a href="#10">Integrate system trash</a></li>
                <li><a href="#11">UI enhancements</a></li>
                <li><a href="#12">Mounting an android device</a></li>
             </ul>
</td></tr></table></div>

<div class="cont">

<br><br><br>
I was looking for a tidy way to navigate directories in a bash shell, so that I could speed up my work a bit.  I'm familiar with `cd` command and Tab key completion of names, but sometimes my mind goes blank, so having a visible list of directories to choose from would be way better for me.  Actually, listing the current directory contents with `ls` and using the cursor keys and Enter to navigate would have simplified things for me, if that had been possible.  But then my search brought me across Roman Zimbelmann's impressive python project, Ranger - the terminal based file browser. 
<br><br><br><br><br>
	<table cellpadding="2" align="center"><tr>
<td><a href="{{site.baseurl}}/zimages/ranger-08-dirs-size.jpeg"><img src="{{site.baseurl}}/zimages/ranger-08-dirs-size-sm.jpeg" width="320" height="200" alt="ranger showing directories"></a></td>
<td>&nbsp;<a href="{{site.baseurl}}/zimages/ranger-07-file-pager.jpeg"><img src="{{site.baseurl}}/zimages/ranger-07-file-pager-sm.jpeg" width="320" height="200" alt="ranger showing file content"></a></td>
<td>&nbsp;<a href="{{site.baseurl}}/zimages/ranger-01-image-inline.jpeg"><img src="{{site.baseurl}}/zimages/ranger-01-image-inline-sm.jpeg" width="320" height="200" alt="ranger with image shown inline"></a></td>
<td>&nbsp;<a href="{{site.baseurl}}/zimages/ranger-02-image-exifdata.jpeg"><img src="{{site.baseurl}}/zimages/ranger-02-image-exifdata-sm.jpeg" width="320" height="200" alt="ranger with image showing exif"></a></td>
</tr>
<tr>
<td width="50" align="center" valign="top">Ranger, in fullscreen, showing directories</td>
<td width="50" align="center" valign="top">the content of a text file  shown in the pager</td>
<td width="50" align="center" valign="top">an image file displayed inline</td>
<td width="50" align="center" valign="top">EXIF data displayed for an image file  </td>
</tr>
<tr>
<td><a href="{{site.baseurl}}/zimages/ranger-03-video-media-info.jpeg"><img src="{{site.baseurl}}/zimages/ranger-03-video-media-info-sm.jpeg" width="320" height="200" alt="ranger with video info"></a></td>
<td>&nbsp;<a href="{{site.baseurl}}/zimages/ranger-04-audio-media-info.jpeg"><img src="{{site.baseurl}}/zimages/ranger-04-audio-media-info-sm.jpeg" width="320" height="200" alt="ranger with audio file info"></a></td>
<td>&nbsp;<a href="{{site.baseurl}}/zimages/ranger-06-archive-pager.jpeg"><img src="{{site.baseurl}}/zimages/ranger-06-archive-pager-sm.jpeg" width="320" height="200" alt="ranger with archive content"></a></td>
<td>&nbsp;<a href="{{site.baseurl}}/zimages/ranger-09-vcs.jpeg"><img src="{{site.baseurl}}/zimages/ranger-09-vcs-sm.jpeg" width="320" height="200" alt="ranger with version control turned on for github repo"></a></td>
</tr>
<tr>
<td width="50" align="center" valign="top">media info shown for a video file</td>
<td width="50" align="center" valign="top">media info shown for an audio file</td>
<td width="50" align="center" valign="top">content shown for an archive</td>
<td width="50" align="center" valign="top">version control aware for github repo</td>
</tr>
<tr><td></td><td></td><td></td></tr>
</table>



<br><br><br>

<h2 id="1" class="tag">Install</h2>
download ranger (zip file) from <a href="https://github.com/ranger/ranger">Ranger git</a><br>
unpack, and run `sudo make install'
<br><br>
or clone from git for latest version (need git installed)
<br>
<form><textarea name="T" id="cmd" rows="2" cols="80">
mkdir ~/Downloads/ranger-git && cd ~/Downloads/ranger-git
git clone https://github.com/hut/ranger.git</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>

optional installs for Ranger:
<form><textarea name="T" id="install" rows="2" cols="80">
sudo apt-get install w3m w3m-img less xsel atool mediainfo jhead ffmpegthumbnailer trash-cli</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


w3m and w3m-image are responsible for in-line preview of images (only with rxvt, urxvt and xterm)

<br><br>
serious w3m issue: w3mimgdisplay process eats up memory - browsing 50 images can run into a Gb of RAM.
<br><br>
there's a patch for it which kills the process after each image preview <a href="https://github.com/ranger/ranger/issues/451#issuecomment-309900698">..ranger/issues/451#</a>
<br><br>
edit the python file img_display.py
<br>

<form><textarea name="T" id="file" rows="2" cols="50">
sudo nano /usr/local/lib/python2.7/dist-packages/ranger/ext/img_display.py</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>
find the "draw" function which begins like...
<br>
<i>&nbsp;&nbsp;&nbsp;def draw(self, path, start_x, start_y, width, height):</i>
<br><br>
and add these two lines after the the line..
<br>
<i>&nbsp;&nbsp;&nbsp;self.process.stdout.readline()</i>

<form><textarea name="T" id="file" rows="2" cols="50">
        self.quit()
        self.is_initialized = False</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>
You can also quit the w3m process any time with <b>Ctrl-C</b>
<br><br>
To release media drives that could be caught in a process such as w3mimgdisplay, then you will need to use Ctrl-C before ejecting.

<br><br><br>
After installing, copy over the config files so that you can make modifications
<form><textarea name="T" id="cmd" rows="1" cols="30">
ranger --copy-config=all</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
 <br>
<b>Note</b>, the config files may be incompatible with new versions of ranger. Run 'man ranger' for details<br>
<br><br>
Ranger is installed to /usr/local/lib/python2.7/dist-packages/ranger so on new installs you could copy, say, only the scope.sh and rc.conf files over, which are always being upgraded - backup your old ones first and then do a meld compare with the latest versions.
<br><br>
Check out the <a href="https://github.com/hut/ranger/wiki"><b>ranger Wiki</b></a> to see how to update ranger. 
<br><br>
What you can do is copy your original config files, install a newer ranger, run the above command and compare new and old contig files with meld
<br><br>
<a href="http://wiki.archlinux.org/index.php/Ranger"><b>Arch Wiki page</b></a>

<br><br><br>

To get started, three commands needed..
<br><br>
<table><tr><td width="120">ranger</td>		<td>launches ranger from the current dir in shell (I make a bash alias <span class="bblue">rr</span>)</td></tr>
<tr><td>S</td>			   <td>in Ranger, drops to a shell at current dir (from where Ctrl-D or `exit' returns to Ranger)
</td></tr>
<tr><td>q</td>			   <td>quits Ranger</td>
</tr>
</table>

<br><br>
<br>

<h2 id="2" class="tag">Features</h2>

<div class="bullet"><ul><li> displays two columns: active directory level at center, upper dir level at left; and a preview pane at the right</li>
<li>navigate with cursor keys: right/left move across the columns of dir levels (i.e. down/up the directory tree), and down/up moves the highlight down/up the file list in active level column</li>
<li>mouse roller also moves up/down the file list</li>
<li>[ and ] keys move into next or previous dir on same dir level without returning up a level and down into the next dir (which would be same as left, up or down, right)</li>
<li>mouse click on dir or file moves highlight to it</li>
<li>Enter, right-click on dir/file or click to blank space at 3rd column at right, enters the dir or opens the file</li>
<li>Spacebar selects files, which then can be yanked (copied) or cut, or have a process run on them</li>
<li>copied or cut files are stored by path and name on a copy buffer, which can be added to from multiple dir's, or displayed, or manipulated anyway you like</li>
<li>copied files can be added to the queue when pasting so as to not launch multiple file operations all together</li>
<li>'v' selects all if nothing is selected, again and it deselects all, and if some are selected with Space then 'v' inverts selection, 'uv' deselects all if some are selected</li>
<li>if files are selected they remain so when leaving the dir and will still be selected when returning to the dir</li>
<li>able to search for string in file names, search and auto-enter dir or auto-open file, search and filter the files displayed as you type, or search and select files with string</li>
<li>by default all text files, pdf, html and other recognised file types can be previewed in the right-hand pane</li>
<li>mediainfo shows details of any audio/video file while exiftool does for image files</li>
<li>any dir can be bookmarked with a character and easily reached with 'find tag' and 'next' keys</li>
<li>files can be tagged with any character</li>
<li>last active file in directory is remembered if returning to dir visited before</li>
<li>dir shows no. of files it contains, or disk usage with key press 'dc', and disk usage of selected files shown at lower right</li>
<li>file permissions, owner, group and modified date displayed at lower left</li>
<li>disk free space shown at lower right</li>
<li>file transfer progress bar</li>
<li>file permissions easily changed on selected files by typing an octal number followed by '='</li>
<li>Ranger's file type executor "Rifle" opens files with a choice of programs, just hit 'r' and choose, or the Rifle number and Enter</li>
<li>audio and video played with mplayer, images with feh</li>
<li>scripts and make files can be run with Enter, thanks to rifle</li>
<li>almost limitless key mapping for easy commands in current dir, first key displays choices, second (or third..) key executes command or brings up console withwhich to modify the command, such as for renaming, replacing, or confirming with Enter</li>
<li>run native ranger commands in "console" or normal shell commands (though not all are possible) while using ranger's macros which can insert file name or path into the commands</li>
<li>press Up in the console to cycle the commands history</li>
<li>supports multple tabs and transferring files to next tab is also possible</li>
<li>supports hierarchal view of current dir location, showing parent/child dir's (default), or tabs side-by-side (NEW - 2016-12)</li>
<li>supports version control systems, for any specific dir, showing up-to-date with remote or modified status of files</li>
<li>attach metadata to files, such as title, author, and sort files by their metadata</li>
<li>clicking on parent dir in title bar moves there, Shift-click on title bar selects the path</li>
</ul></div>
<br>
And that's just the basics!  There are endless possibilities with Ranger because it incorporates the bash shell.

<br><br>


<br><br><table cellpadding="4" border="1" width="15%" style="border-collapse: collapse; position: absolute; left: 700px; "><tr><td><span style="font-size: 18px; ">Get my <a href="{{site.baseurl}}/files/ranger-keybinds_quinton.pdf">key mapping sheet!</a></span></td></tr></table>

<h2 id="3" class="tag">Default key-bindings</h2>

    
<h3>navigation</h3>
<table width="900"><tr><td style="width: 140px;">arrows</td><td>traverse in/out of dir's, move up/down lists</td></tr>

<tr><td>j, {n} j     </td><td>move up 10 lines (default, <b>I change it to 4</b>), or move up 10 lines {n} times</td></tr>

<tr><td>k, {n} k     </td><td>move down 10 lines, or move down 10 lines {n} times</td></tr>

<tr><td>g {letter}     </td><td>quick go to (system level dir's) - gR go to ranger dir</td></tr>

<tr><td>g n     </td><td>new tab made at home</td></tr>

<tr><td>Ctrl-n     </td><td>new tab opened at current dir</td></tr>

<tr><td>tab, shift-tab     </td><td>switch tab </td></tr>

<tr><td>q     </td><td>quit tab or ranger if only one tab</td></tr>

<tr><td>u q     </td><td>restore closed tab</td></tr>

<tr><td>[ or {n}[   </td><td>move up 1 dir in same parent, or move up n parent dir's</td></tr>

<tr><td>] or {n}]   </td><td>move down 1 dir in same parent, or move down n parent dir's</td></tr>

<tr><td>H     </td><td>move back 1 dir in history (<b>I make this Alt-left</b>)</td></tr>

<tr><td>L     </td><td>move forward 1 dir in history (<b>I make this Alt-right</b>)</td></tr>

<tr><td>m {x}     </td><td>bookmark the dir x (any letter/digit)</td></tr>

<tr><td>`{x} or '{x}     </td><td>go to dir bookmarked x</td></tr>

<tr><td>``     </td><td>go to previous dir = effectively you can use `` to go back and forth between two locations</td></tr>

<tr><td>pg up, pg dn, <br>home, end     </td><td>move down/up file list</td></tr>

</tr><td>d c     </td><td>update cumulative dir size</td>

<tr><td>d u     </td><td>show dir content summary</td></tr>

<tr><td>J     </td><td>escape Ranger from reading a heavy dir/file</td></tr></table>
<br>

<h3>sorting</h3>

<table width="900"><tr><td style="width: 140px;">o t      </td><td>sort by type first</td></tr>

<tr><td>o s                   </td><td>sort by size first</td></tr>

<tr><td>o a /o c /o m    </td><td>sort by time</td></tr>
 
<tr><td>o n                   </td><td>sort natural</td></tr>

<tr><td>o {T/S/A/C/M}  </td><td>sort in reverse order</td></tr>

<tr><td>o r                    </td><td>reverse the sort order</td></tr></table>

<br>

<h3>file actions</h3>

<table width="900"><tr><td style="width: 140px;">/, f    </td><td>enter file name to navigate (<b>f can't do this with my keybinds</b> as I make use of it)</td></tr>

<tr><td>n     </td><td>search newest file in dir, or next after search with /, f</td></tr>

<tr><td>N      </td><td>previous file after search</td></tr>

<tr><td>c..    </td><td>set the next search order</td></tr>

<tr><td>o..  </td><td>set the sort order</td></tr>

<tr><td>i      </td><td>focus a highlighted file with less (but only able to see part of file) <br>
				i to toggle focus, E to edit in nano</td></tr>
				
<tr><td>y y    </td><td>copy</td></tr>

<tr><td>y a   </td><td>copy add to buffer (can copy-paste files from multiple directories this way)</td></tr>
                
<tr><td>y r   </td><td>copy remove from buffer</td></tr>
                
<tr><td>y G   </td><td>copy all files from selected to bottom of list</td></tr>

<tr><td>y gg   </td><td>copy all files from selected to top of list</td></tr>

<tr><td>d d   </td><td>cut (da, dr also to cut from multiple directories, dG, dgg also)</td></tr>

<tr><td>p p   </td><td>paste</td></tr>

<tr><td>p P   </td><td>paste (add to queue)</td></tr>

<tr><td>p o     </td><td>paste with over-write</td></tr>

<tr><td>p O     </td><td>paste with over-write (add to queue)</td></tr>

<tr><td>u d      </td><td>clears copy/cut buffer, also uy (<b>I change this to uu as it seems faster</b>)</td></tr>

<tr><td>c w    </td><td>rename/bulk rename</td></tr>

<tr><td>I			</td><td>edit name, cursor at front (I change it to i, and make Alt-i view in pager)</td></tr>

<tr><td>A			</td><td>edit name, cursor at end </td></tr>

<tr><td>a			</td><td>edit name, cursor inside extension</td></tr>

<tr><td>E			</td><td>edit file with bash editor (<b>I change this to fe</b> - there is F4 as well - see how to set nano as editor below)</td></tr>

<tr><td>insert		</td><td>touch (create new file) (<b>I add ft</b>)</td></tr>

<tr><td>delete      </td><td>deletes file (no confirm for single files by default -can change in conf.rc)</td></tr>

<tr><td>r      </td><td>open file with program on rifle list</td></tr>

<tr><td>r 1     </td><td>unpacks selected archive (need to install <b>atool</b>) -actually hits the 1st option with rifle (you can just type 1 Enter)</td></tr>

<tr><td>11,12,13,14 Enter    </td><td>(on image file) set image as desktop background with feh (11=scale, 12=tile, 13-center, 14=fill)</td></tr>

<tr><td>+ / -   </td><td>chmod commands</td></tr>

<tr><td>{octal no} =  </td><td>change permissions, e.g. 744 =, set permissions to -rwxr--r--</td></tr></table>

<br>
<h3>marking</h3>
<table width="900"><tr><td style="width: 140px;">Space              </td><td>mark</td></tr>

<tr><td>v                      </td><td>invert selection</td></tr>

<tr><td>V, uV                </td><td>marks/unmarks files as cursor moves, until escape pressed, or yanked etc (<b>I change this to b</b>)</td></tr>

<tr><td>u v                   </td><td>unmark all files</td></tr>

<tr><td>t                      </td><td>tag toggle</td></tr>

<tr><td>u t                   </td><td>remove all tags</td></tr>

<tr><td>T                     </td><td>remove any tags of selected files</td></tr>

<tr><td>"{x}                  </td><td>custom tag </td></tr>



<tr><td>M..        </td><td>linemode select (<b>I change this to Alt-m</b>)</td></tr>

</table>

<br>
<h3>operation</h3>
<table width="900"><tr><td style="width: 140px;">Ctrl-R               </td><td>reload</td></tr>

<tr><td>Ctrl-h, z h        </td><td>toggle hidden files (<b>I add to this F2</b>)</td></tr>

<tr><td>Ctrl-c        </td><td>cancel an operation</td></tr>

<tr><td>Ctrl-s        </td><td>freeze ranger! Ctrl-c to continue</td></tr>

<tr><td>:flat 1    </td><td>puts all files of sub-dir's (1 level deep) in the main column </td></tr>

<tr><td>z                      </td><td>toggle settings</td></tr>

<tr><td>:, ;                     </td><td>open console to enter commands</td></tr>

<tr><td>s, !, @, #          </td><td>open shell console</td></tr>

<tr><td>1?                    </td><td>display all key bindings alphabetically</td></tr>

<tr><td>2?                    </td><td>Ranger commands usage</td></tr>

<tr><td>3?                    </td><td>Ranger settings</td></tr>

<tr><td>?, F1                </td><td>man page, key bindings or settings</td></tr>

<tr><td>W                     </td><td>message log</td></tr>

<tr><td>w                     </td><td>job queue</td></tr>
</table>
<br><br>

<h3>Macros used in console and shell</h3>
<table width="900"><tr><td style="width: 140px;">%f   			</td><td>the highlighted file</td></tr>

<tr><td>%d   			</td><td>the path of the current directory</td></tr>

<tr><td>%s   			</td><td>the selected files in the current directory. (defaults to highlighted file if none selected)</td></tr>

<tr><td>%t   			</td><td>all tagged files in the current directory</td></tr>

<tr><td>%c   			</td><td>the full paths of the currently copied/cut files</td>

<tr><td>%p   			</td><td>the full paths of the selected files</td>
</tr></table>
<br><br>

<h3>Flags used with open_with and shell commands</h3>
(type <b>r</b> for open_with, or <b>s</b>, <b>!</b>, <b>@</b> for shell.  open_with flags must be plain with no dash -)
<br><br>
<table width="900"><tr><td style="width: 140px;">-f                   </td><td>runs process in background - useful for an encoding/mogrify job as ranger will still be usable while the process completes</td></tr>

<tr><td>-c                   </td><td>runs on current file, not selected</td></tr>

<tr><td>-r                    </td><td>runs with super user privileges</td></tr>

<tr><td>-t                    </td><td>will show the process in a new terminal window (opens xterm)</td></tr></table>
<br><br>


<h3>Flags used with only the shell command</h3>
<table width="900"><tr><td style="width: 140px;">-p                  </td><td>sends the process to the pager - which is closed with q, or canceled before with Ctrl-C</td></tr>

<tr><td>-s                  </td><td>silent mode - the output is discarded</td></tr>

<tr><td>-w                 </td><td>bash waits at the end of the process so that you can read the output and then press enter</td></tr></table>

<br><br>
typing '<b>@-rf leafpad</b>' will open a file with sudo (writes `shell -rf leafpad %s` to console)

<br><br>
Check the rc.conf file

<br><br><br><br>


<h2 id="4" class="tag">My keybindings</h2>  


 <b>Updated Aug 2018</b>
 <br><br>
 <h3 style="color: #2D46CF; ">keybinds I changed from the default..</h3>
<br><br>
Note: with Ranger 1.7 key mapping with Alt is (almost) fixed, e.g. &#60;a-r>, which opens up a huge area for new keys! Still can't use &#60;a-[> or &#60;a-bracketleft> or &#60;c-1>
<br><br>
<form><textarea name="T" id="file" rows="42" cols="100">
map <a-down>  move down=4     #replaced k
map <a-up>    move up=4       #replaced j
map h      history_go -1    #replaced H
map l      history_go 1     #replaced L
copymap h  <a-left>     #enable Alt-left
copymap l  <a-right>    #enable Alt-right 

map <a-m>f linemode filename
map <a-m>i linemode fileinfo
map <a-m>p linemode permissions
map <a-m>t linemode metatitle

map /   console search%space
map \]  console find%space
map \[  console travel%space
map \\  console mark%space
map |   console filter%space
 
alias filter     scout -iprt
alias find       scout -aet
alias mark       scout -mr
alias unmark     scout -Mr
alias search     scout -rts
alias travel     scout -aefikst

map fe  edit
map du  shell -p du -ch -d 1 | sort -rh          #note also my ,df displays file and dir count
map dz  shell -p du -ch -d 1 | sort -k 2b

#change i to edit file name at first char, set Alt-i to open file in pager instead of i
map <a-i> display_file
map i  eval fm.open_console('rename ' + fm.thisfile.basename, position=7)

map uu   uncut
map <C-n>  tab_new %d

copymap gn <a-t> 
copymap ct <a-c> 

map <F5> reset          #refresh screen - easier than ctrl-r
map <DELETE> shell -s trash-put %s       (need trash-cli -see below)</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>
<h3 style="color: #2D46CF; ">then all those I added..</h3>
<br>


<table width="80%" style="background-color:transparent"><tr><td style="padding-right: 20px; " valign="top">
<table width="80%" style="background-color:transparent"  cellpadding="2">
<tr><td width="150" style="color: #2D46CF; font-weight: bold; "> Alt-m</td><td width="150" > <a href="#met" class="tag">metadata</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold;" width="100">f</td><td> <a href="#fi" class="tag">files</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> O</td><td> <a href="#op" class="tag">open files</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> y/d/p</td><td> <a href="#yk" class="tag">yanking</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> P</td><td> <a href="#su" class="tag">super user</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> X/x</td><td> <a href="#del" class="tag">delete</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> dot-number</td><td> <a href="#con" class="tag">config files</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ';</td><td> <a href="#cdcon" class="tag">cd config dir's</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,k </td><td><a href="#bk" class="tag">backup</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,l</td><td> <a href="#sym" class="tag">symlinks</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,d</td><td>  <a href="#dir" class="tag">directories</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,a</td><td>   <a href="#ar" class="tag">archives</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,i</td><td>   <a href="#iso" class="tag">iso</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,s</td><td>   <a href="#src" class="tag">source files</a></td></tr></table>
</td>
<td>
<table style="background-color:transparent"  cellpadding="2">
<tr><td width="150" style="color: #2D46CF; font-weight: bold;"> F</td><td width="200" > <a href="#img" class="tag">feh</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> fi</td><td>  <a href="#feh" class="tag">image files</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> fim</td><td>  <a href="#mog" class="tag">mogrify</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> E</td><td>  <a href="#exif" class="tag">exiftool</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> fa</td><td>   <a href="#aud" class="tag">audio files</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> fv</td><td>    <a href="#vid" class="tag">video files</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> fG</td><td> <a href="#gps" class="tag">GPS Babel conversion</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,n</td><td> <a href="#nfs" class="tag">nfs</a> </td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; ">  J</td><td> <a href="#git">Github</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> ,z</td><td>    <a href="#brn" class="tag">bashburn</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; ">  G</td><td>   <a href="#gpg" class="tag">gpg encryption</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "> R</td><td>   <a href="#batch" class="tag">batch renaming</a></td></tr>
<tr><td style="color: #2D46CF; font-weight: bold; "></td></tr></table>
</td></tr>
</table>
<br><br>

<br>

<h3 id="fi" class="tag">moving around</h3>
<form><textarea name="T" id="file" rows="35" cols="120">
################## My keyinds ######################

map Vm set viewmode miller
map Vt set viewmode multipane

map <a-PAGEDOWN> move down=0.5   pages=True
map <a-PAGEUP>   move up=0.5   pages=True
   
     #move up/down parent dir by 5 or 20, this is v useful for navigation
map {	  move_parent n=-5
map }	  move_parent n=5
map <F9>  move_parent n=-10
map <F10> move_parent n=10          #doesn't work if less than 10 dir's of same parent

copymap ct <a-c>  #search next tag

map ga  cd /etc/apt
map M   chain tab_new; cd /media         #note, this over-rides ranger default for metadata modeline select, which I make Alt-m
map <F12> flat             #ie {n}F12 show files of sub-dir's, n levels deep, all in main column - be careful it can be expensive to show them all!
map <F2> toggle_option show_hidden
copymap S <a-s>                   #open Shell with Alt-s

######### Set the keyboard   ##########
map %1 shell setxkbmap us -variant colemak
map %2 shell setxkbmap us
map %3 shell -r nano /etc/default/keyboard

######### Set screen brightness level   ##########
map #1 shell xrandr --output LVDS1 --brightness 1.0
map #5 shell xrandr --output LVDS1 --brightness 0.5
map #8 shell xrandr --output LVDS1 --brightness 0.8
map #9 shell xrandr --output LVDS1 --brightness 0.9</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br>
<h3 id="met" class="tag">map Alt-m for metadata</h3>
<form><textarea name="T" id="file" rows="6" cols="120">
##### Meta data ##########

map f<a-m> console -p11 meta title%space  %%s       #add meta title to sel'd files
map <a-f> linemode filename               #linemode: filename (normal)
map <a-t> linemode metatitle              #linemode: titles </textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br>

<h3 id="fi" class="tag">map f for files</h3>
<form><textarea name="T" id="file" rows="28" cols="120">

##### files ##########

map fl   less %f                 #view file with less. q to quit (ranger i doesn't show full file)
map fm   console mkdir%space             # create dir
map ft   console touch%space             # create file
map f+   shell -s chmod +x %s                     #make a file executable
map f- shell -s chmod -x %s
map f=   console shell -s chmod 664 %%s                #chmod operations - or type 664=
map fr   console rename%space
map fb   bulkrename %s
map fC console -p16 shell cat %%s > 1              #concatenate text files
map fpy   shell -f pyrenamer %d                            #GUI renamer, or another, `Thunar -B %d'
map fg   console -p22 shell -p grep -nT -r ?* %%s            #grep (search) pattern in files or highl'd dir
map f?   console -p22 shell perl -pi -e 's/?/@/g' %%s                  #replace string in files
map fc   shell -f meld %s 	                                           #compare two files in meld
map fpdf console -p88 shell -ft gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress-sOutputFile=?.pdf %%s
                                                      #join selected pdf files together using ghost script -change ?
map ff   console -p25 shell -p find . -name "*?*" -type f -print            #find files and print paths to pager
map f\   shell -f catfish --path=%d                                        #find files with catfish
map fx   shell -f regexxer %d                                            #run string replace tool
map f1   console -p49 shell -s for file in %%s ;do cp "$file" "$file"_1 ;done           #duplicate selected files adding _1
map f2   console shell -s sh ~/scripts/duplicate %%s               #duplicate selected files infix _1
map f3   console shell -s rename-with-selected %f %s          #rename highlighted file with selected file's name
map fW1  console shell > %f												#wipe a file with 0 bytes
map fW2  console shell -f for file in %%s; do > "$file" ;done           </textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>

f2 script, duplicates file, puts suffix inside the file extension:
<form><textarea name="T" id="file" rows="4" cols="80">
#!/bin/bash
for f in $@; do  cp "$f" "${f/\.*/_1\.${f##*.}}" ;done
              
#            (can change _1 to date-time etc)</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br>
"f3" script, to rename the highlighted file with the selected file's name, keeping original extension

<form><textarea name="T" id="file" rows="2" cols="30">
#!/bin/bash
mv $1 "${2%.*}.${1##*.}"</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="op" class="tag">map O to open files</h3>
<form><textarea name="T" id="file" rows="10" cols="120">
##### open file ##########

map Op   shell -f leafpad %f                #open with leafpad
map Og   shell -f geany %s                #open with geany
map Ow   shell -f libreoffice4.4 %s        #will open any open doc format file, or other compatible, with libre office (change version)
map On   shell -f rxvt -e nano %f        #open file forked in nano
map Ol   shell -f rxvt -e less %f         #open forked to view with less
map Ot   shell -f rxvt -cd %d              #open current dir in new terminal</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br>
<h3 id="yk" class="tag">map y,d,p for yank, cut and paste commands</h3>
<form><textarea name="T" id="file" rows="25" cols="150">
##### yanking ##########

map y2   shell -s cp %s "`yad --title="Copy To" --file --directory --height=400 --width=500`"
map d2   shell -s mv %s "`yad --title="Move To" --file --directory --height=400 --width=500`"
map ys   chain save_copy_buffer; shell less ~/.config/ranger/copy_buffer                    #saves copy buffer to file and then shows the file in pager
map yb   chain save_copy_buffer; shell less ~/.config/ranger/copy_buffer | xsel --clipboard     #copy buffer to clipbd
map yp   shell echo -n %d/%f | xsel --clipboard   #copy filename and path
map yn   shell echo -n %s | xsel --clipboard      #copy filenames
map yd   shell echo -n %d | xsel --clipboard      #copy directory name
map pc   shell -f rsync -ru %s %d/%f/                        #copy the selected files into highlighted dir
map pm   shell -f mv -u %s %d/%f                            #move the selected files into highlighted dir
map pds  shell -f rsync -rul %c %d/%f/                         #copy buff'd into dir
map pdm  shell -f mv -u %c %d/%f                              #move buff'd into dir
map ps   shell -f rsync -rul %c %d                        #sync buffer'd files into curr dir  :links as links
map pr   shell -f rsync -ruL %c %d                      #sync buffer'd files into curr dir  :inc link-referred files
map ytt  shell -f rsync -rul %s %D                      #sync sel'd into dir on next tab  :links as links
map yff  shell -f rsync -rul %S %d                    #sync sel'd from dir on next tab  :links as links
map ytr  shell -f rsync -ruL %s %D                  #sync sel'd into dir on next tab  :inc link-referred files
map yfr  shell -f rsync -ruL %S %d                 #sync sel'd from dir on next tab  :inc link-referred files
map dtt  shell -f mv %s %D                            #move sel'd into dir on next tab
map dff  shell -f mv %S %d                             #move sel'd from dir on next tab
map p\x  shell mkdir moved; mv -t moved `xsel -b -o`           #remove files via list on clipbd (collected with yn)
map p\c  shell mkdir copied; cp -t copied `xsel -b -o`         #copy files via list (yn)</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="su" class="tag">map P for commands with super user privelege</h3>
<form><textarea name="T" id="file" rows="13" cols="120">
##### Super-user ##########

map Pm  console shell -r mkdir%space
map Pt  console shell -r touch%space
map Pn  console shell -r nano 
map Pe  shell -r nano %f                    #edit file with nano
map Pp  shell -f gksu leafpad %f             #open with leafpad
map Pr  console shell -r mv %f%space               #(type new name after) rename file
map P+  shell -rs chmod +x %f                           #make a file executable
map Pw  console shell -r chown -R $USER:$USER %%s            #change ownership of sel'd files
map Ps  shell -r rsync -arult %c %d                #sync buffered to dir
map Pyt shell -r rsync -arult %s %D                   #sync selected to next tab</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="del" class="tag">map X for delete commands</h3>
<form><textarea name="T" id="file" rows="15" cols="120">
##### delete ##########

map <DELETE> shell -s trash-put %s            #integrated trash (recycler) - see below how to set up.
map <a-DELETE> shell -cs trash-put %f		#delete the current file only - not all the selected ones!! 
map <S-DELETE>  console delete
map X    console delete	         #hit enter before deleting
map xX shell rm -f %f  			#delete highlighted file not the selected files!
map PX   console shell -r rm %%s               #delete files with super-user priveleges
map xX1 console shell -tf shred -uv %%d/%%s       #shred files
map xX2 console -p26 shell -ft find . -depth -name "*." -execdir shred -uv {} \;   #shred all files recursively -with name
map xX3 console shell -ft find . -depth -type f -execdir shred -uv {} \;        #shred all ~*any*~ files recursively
map xx1  cd ~/.local/share/Trash/files
map xx2  cd /media/FILES/.Trash-1000/files
map xx3  cd /media/VIDEO/.Trash-1000/files</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="con" class="tag">map dot for finding config files</h3>
<form><textarea name="T" id="file" rows="9" cols="80">
####### Edit config files ##########

map .1  shell -f leafpad ~/.config/ranger/rc.conf
map .2  shell -fr rxvt -e nano /etc/apt/sources.list
map .3  shell -fr rxvt -e nano /etc/fstab
map .4  shell -f leafpad ~/.config/openbox/rc.xml
map .5  shell -f leafpad ~/.config/openbox/menu.xml
map .6  shell nano ~/.config/openbox/autostart</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="cdcon" class="tag">map '; for cd to config dir's</h3>
<form><textarea name="T" id="file" rows="12" cols="80">
##### cd to config dir's ##########

map ';x   cd ~/.xnviewmp
map ';l   cd ~/.local/share
map ';u1  cd ~/.config/uzbl
map ';u2  cd ~/.local/share/uzbl
map ';o   cd ~/.config/openbox
map ';r   cd ~/.config/ranger
map ';s   cd ~/QuickLink/Settings
map ';ac  cd ~/QuickLink/applications-config
map ';au  cd ~/QuickLink/applications-usr</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="bk" class="tag">map comma-k for backup commands/scripts</h3>
<form><textarea name="T" id="file" rows="7" cols="120">
##### backup ##########

map ,k1   shell -s cp ~/.config/ranger/* ~/Settings/ranger/    #backup the ranger config dir
map ,k2   shell -s sh ~/scripts/backup-config-files
map ,kp   shell -s sh ~/scripts/backup %s                             
map ,k9   shell -s gksu sh ~/scripts/backup-sys-files</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br>
script for ,kp (as Ranger chokes on the date-time macros thinking they are its own)
<form><textarea name="T" id="file" rows="2" cols="80">
#!/bin/bash
for f in $@ ;do cp "$f" /dir/backups/"$f"_$(date +"%y%m%d") ;done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>
(the k2 and k9 scripts are simple rsync commands - see my <a href="{{site.baseurl}}/tutorial/15-config-migrate.html">config migrate page</a>)
<br>

<br><br><br>
<h3 id="sym" class="tag">map comma-l for symlink commands</h3>
<form><textarea name="T" id="file" rows="7" cols="150">
##### symlinks ##########

map ,ll  shell ln -s %d/%f ~/Links/           #make a symlink to selected dir/file in ~/Links
map ,ld  shell ln -s %d/%f ~/Desktop/           #make a symlink to selected dir/file in ~/Desktop (i.e a desktop shortcut)
map ,lL  shell -s ln -s "`yad --title="Make a Symlink To" --file --height=400 --width=500`" %d            #make a symlink in current dir
map ,lr  shell -s ln -fsT "`yad --title="Re-link To" --file --height=400 --width=500`" %f         #change the target of a symlink</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br>
<h3 id="dir" class="tag">map comma-d for directory commands</h3>
<form><textarea name="T" id="file" rows="13" cols="150">
##### directory ##########

map ,ds  shell -w rsync -a --update --progress %d/%f/* "`yad --title='Sync the selected directory with...' --file --height=400 --width=500 --directory`"
                #sync contents of current dir with another dir, shows progress
map ,dc  shell -s find . -type d -exec mkdir -p -- ../tree_clone/{} \;             
                        #clone the dir tree of current dir down -creates empty dir's in new dir 1 level up
map ,do  shell -rs chown -R $USER %f                 #change ownership of dir to user (recursively)
map ,dx  console shell -f find . -type d -maxdepth 1 -empty -delete       #remove empty directories in current dir

#count files and folders at current dir, recursively
map ,df shell echo -e \.\.\.\.`find . -type d -printf x | wc -c` folders \.\.\.\. `find . -type f -printf x  |wc -c` files \.\.\.\.`du -chs --apparent-size` |less
</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="ar" class="tag">map comma-a for archive commands</h3>
<form><textarea name="T" id="file" rows="11" cols="120">
##### archive ##########

map ,a1  console shell zip -r ?.zip %%s
                           #make zip archive from selected files, replace ? with archive name
map ,a2  console shell -f 7z a -t7z ?.7z %%s
                           #make 7z archive from selected
map ,a3  console shell -f tar cvpf ?.tar %%s
                           #make tar archive from selected
map ,a4  console shell -f tar cvzpf ?.tgz %%s
                           #make tar zip archive from selected</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br>
<h3 id="iso" class="tag">map comma-i for iso/dvd commands</h3>
<form><textarea name="T" id="file" rows="10" cols="150">
##### iso/dvd ##########

map ,i1   chain shell gksu 'mount -o loop -t iso9660 %f /mnt/mounted'; cd /mnt/mounted     #mount iso - mkdir /mnt/mounted first!!
map ,i2   shell -s gksu umount /mnt/mounted                                #unmount the mounted iso
map ,i3   shell -ft growisofs -dvd-compat -Z /dev/dvd1=%f            #burn iso to dvd (`dvd1' etc is usb dvd writer, `dvd' is internal)
map ,xx   console shell -s mkfs -t vfat /dev/sdX                 #format a usb stick (repair it), change X
map ,cdc  console shell -ft gksu cdrdao copy		#copy audio cd, see my page cd copy
map ,cdej console shell -s eject /dev/sr0              #eject laptop CDROM
copymap ,cdej ,cd<F8></textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br>
<h3 id="src" class="tag">map comma-s for source file commands (though dropping to shell might be more advisable)</h3>
<form><textarea name="T" id="file" rows="6" cols="50">
##### source archives ##########

map ,s1	console shell -ft ./configure
map ,s2  shell -ft make
map ,s3  shell -pw sudo make install</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="feh" class="tag">map F for feh image viewer commands</h3>
<form><textarea name="T" id="file" rows="15" cols="150">
##### feh commands ##########

map Fs  shell ls | xarg ;feh -dFZ  -D4 -Sfilename             #start feh slideshow in dir of images, escape to quit
map Fc  shell feh -dFZ -D4 -Sfilename --start-at %f *      #start slideshow from current file
map Fr  shell feh -rdFZ -D4 -Sfilename %f                    #start slideshow from selected dir -recursive

###  Openbox! To set the desktop bg image and copy to autostart, use this: 
### (this method builds a collection - it copies the pic to a folder "~/wallpapers"... then the 'sed' command replaces a line in the autostart file, to look up the image you chose at startup -my line is no.7)
###  You could just do '11,12,13, or 14, Enter' in Ranger to set feh bg and add a line in autostart:  sh ~/.fehbg & (this will not make a collection of wallpapers)

map Fb  chain shell -f feh --bg-scale %f; shell cp %f ~/wallpapers; sed -i '7s/.*/feh --bg-scale ~\/wallpapers\/%f \&/' ~/.config/openbox/autostart
</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="img" class="tag">map fi for image file commands</h3>
<form><textarea name="T" id="file" rows="6" cols="150">
##### image files ##########

map fiv   shell xnview %f          #edit image with XnViewMP
map fig   shell gimp %f          #edit image with Gimp
map fii   shell inkscape %f          #edit image with inkscape
map fid   shell darktable %f          #edit image with darktable</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="mog" class="tag">map fim for mogrify commands</h3>
<form><textarea name="T" id="file" rows="18" cols="150">
##### mogrify commands ##########
map fim1  shell -f mkdir "../${PWD##*/}_a"; mogrify -path "../${PWD##*/}_a" -resize '1200x1200>' -quality 90 *.jpg *.JPG            
                                    #reduce jpegs in current dir and place new images in dir_a 1 level up
map fim2 console shell -f mkdir "../${PWD##*/}_a"; mogrify -path "../${PWD##*/}_a" -resize '1200x1200>' -quality 85 *.jpg *.JPG
map fim3  console shell -f mogrify -resize '1200x1200>' -quality 90 *{.jpg|.JPG}
                                                        #reduce jpegs in current dir, OVERWRITE files, 1200pix, 90%
map fim4  console shell -f find . -type f -iname "*.jpg" -print0 | xargs -0 mogrify -resize '1024x1024>' -quality 84 {} \;
                                                        #reduce jpegs RECURSIVELY, start from current dir, OVERWRITE files, 1024pix, 84%
map fim5  shell -f mogrify -format jpg -quality 100 *.png      #convert png to jpeg -progress will be noted by green temp file moving down list
map fimr1 console -p27 shell -f mogrify -rotate -90 %s%s
map fimr2 console -p27 shell -f mogrify -rotate 90 %s%s

map fim6  shell -f sh ~/scripts/image-resize.sh %f           #see image processing page for these 2 scripts
map fim7  shell -f sh ~/scripts/image-convert.sh %f
map fixx  shell -f jhead -di %s                           #remove iptc keywords from selected images</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br>
<h3 id="exif" class="tag">map E for exiftool and jhead commands</h3>
<form><textarea name="T" id="file" rows="42" cols="150">
##### exiftool commands ##########

### To adjust EXIF date use - or +, then yy:mm:dd, e.g. +=:04:05 0 to add on 4 months and 5 days and no time change; or -=0 03:20:15 to subtract 3 hrs, 20min, 15sec and no date change

map Ed1  console chain shell -p exiftool -m -overwrite_original -alldates-+=':: 0' %%s
map Ed2  console shell jhead -ds:: %%s 
            #yyyy:mm:dd or yyyy:mm or yyyy / use -dt to set date-time i.e. -dtyyyy:mm:dd-hh:mm:ss  (no space after -ds or -dt)
map Ed3  console shell exiftool -overwrite_original "-filemodifydate>alldates" %%s 
            #this creates exif dates on files that have no EXIF data (e.g. stills cut from video)

###add keywords or rating:
map Es   shell -f exiftool -m -overwrite_original -xmp:subject+="`yad --entry --button='Write keywords':0 --undecorated --width=400 --height=50`" %s
map Er   console shell -f exiftool -m -overwrite_original -xmp:rating=2 %%s
map Eb1  shell -f exiftool -m -overwrite_original -xmp:label=red %s           #add color label
map Eb2  shell -f exiftool -m -overwrite_original -xmp:label=yellow %s
map Eb3  shell -f exiftool -m -overwrite_original -xmp:label=green %s
map Eb4  shell -f exiftool -m -overwrite_original -xmp:label=blue %s
map Eb5  shell -f exiftool -m -overwrite_original -xmp:label=purple %s
 
###add comment (crude! it replaces existing comment and blank or cancel also replaces!  I need to work on it)
map Ec  shell -f exiftool -m -overwrite_original -comment="`yad --form --button='Write comment':0 --field=:TXT --undecorated --width=400 --height=200`" %s
 
###remove keywords and rating:
map Ex1  console shell -f exiftool -m -overwrite_original -xmp:subject= %%s      #remove keywords
map Ex2  console shell -f exiftool -m -overwrite_original -xmp:rating= %%s      #remove rating
map Ex2  console shell -f exiftool -m -overwrite_original -xmp:label= %%s       #remove label
 
###subject/rating/label from list of file names on the clipboard
map Els  console shell -f xsel -b -o | xargs exiftool -m -overwrite_original -xmp:subject+="`yad --entry --button='Write keywords':0 --undecorated --width=400 --height=50`"
map Elr  console shell -f xsel -b -o | xargs exiftool -m -overwrite_original -xmp:rating=2
map Elb  console shell -f xsel -b -o | xargs exiftool -m -overwrite_original -xmp:label=`yad --list --undecorated --width=100 --height=200 --column red yellow green blue purple --separator=''`
 
#sort image files into folders by date (this is a very handy tool to use after an import of files from SD card)
map Ef  console shell -fs sh ~/scripts/exif-sort

#sort files into folders by modified date -replace * for $@ to hit only selected files
map fD  console shell -fs sh ~/scripts/sort-files</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>
script for Ef, "exif-sort"
<form><textarea name="T" id="file" rows="2" cols="80">
#!/bin/bash
exiftool -r "-directory<datetimeoriginal" -d "%y-%m-%d" *.{jpg,JPG}</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>
script for fD, "sort-files" (a very useful one to have when you've imported 400 clips from a video camera etc - no EXIF data)
<form><textarea name="T" id="file" rows="3" cols="80">
#!/bin/bash
for i in  *; do DAT=$(date -r $i +%y-%m-%d); mkdir -p $DAT; mv $i $DAT ; done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="vid" class="tag">map fv for video file commands</h3>
<form><textarea name="T" id="file" rows="15" cols="120">
##### video files ##########

map fvm  shell -f mpv %s
map fvv  shell -f vlc %s
copymap fvm f<F2>


##### ffmpeg commands ##########

map fvf1  console shell -ft ffmpeg -i %f -vn -acodec libvorbis -ac 2 -ab 256k -ar 44100 %f.ogg     #extract audio from video (ogg)
map fvf2  console shell -ft ffmpeg -i %f -vn -ar 44100 -c:a 2 -q:a 0 -f mp3 %f.mp3                            # (mp3)
map fvf3  console shell -f ffmpeg -i %f -target pal-dvd out.vob
map fvf4  console shell -ft flac-ogg %%s        #convert flac to ogg
map fvf5  console shell -ft flac-mp3 %%s        #convert flac to mp3</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>
scripts tor ffmpeg conversion of flac to ogg/mp3 - but see audio file commands for oggenc
<br>
"flac-ogg" 
<form><textarea name="T" id="file" rows="4" cols="80">
#!/bin/bash
for a in *.flac; do
 < /dev/null ffmpeg -i "$a" -c:a libvorbis -q:a 7 "${a%.*}.ogg"
done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>  
<br>
"flac-mp3"
<form><textarea name="T" id="file" rows="4" cols="80">
#!/bin/bash
for a in *.flac; do
 < /dev/null ffmpeg -i "$a" -q:a 0 "${a%.*}.mp3"
done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>    

   
<br><br>
<h3 id="aud" class="tag">map fa for audio edit commands</h3>
<form><textarea name="T" id="file" rows="8" cols="120">
##### audio files ##########

map fae  shell -f easytag %d
map faa  shell -f audacity %s
map fa1  shell -ft oggenc %s -q 7     #convert flac or other raw format to ogg
map fa2  console shell -ft find . -type f -name "*flac" -exec oggenc -q 7 {} \;   #convert all flac to ogg
map fa3  shell -ft ogg2mp3 -B 256 --vbr-new -V 0 *.ogg %s        #convert ogg to mp3 (how horrible) need vorbis-tools</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

   
<br><br>
<h3 id="gps" class="tag">map fG for GPS Babel conversion</h3>
<form><textarea name="T" id="file" rows="5" cols="120">
##### GPS Babel conversion ##########

#### gpx to Garmin tab delimited
map fG1   shell -s for fi in %s; do gpsbabel -w -i gpx -f "$fi" -x track,fix=pps -o garmin_txt -F "$fi".tab ;done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="mt" class="tag">map comma-m and comma-u for mounting/unmouning drives</h3>
<form><textarea name="T" id="file" rows="43" cols="100">
##### mounting/unmounting drives with mount/pmount ##########

map <F1>0 console -p22 shell -r mount /dev/sd %f                    
map <F1>m  console shell -s pmount /dev/sdb1         
                        #use pmount to mount devices if sys does not auto-mount
   
   #use pmount for removable drives not listed in fstab  (F1 replaces help key bind!)                   
map <F1>b1 shell -s pmount /dev/sdb1
map <F1>b2 shell -s pmount /dev/sdb2
map <F1>b3 shell -s pmount /dev/sdb3
map <F1>b4 shell -s pmount /dev/sdb4
map <F1>c1 shell -s pmount /dev/sdc1
map <F1>c2 shell -s pmount /dev/sdc2
map <F1>c3 shell -s pmount /dev/sdc3
map <F1>c4 shell -s pmount /dev/sdc4
map <F1>d1 shell -s pmount /dev/sdd1
map <F1>d2 shell -s pmount /dev/sdd2
map <F1>d3 shell -s pmount /dev/sdd3
map <F1>d4 shell -s pmount /dev/sdd4
map <F1>e1 shell -s pmount /dev/sde1
map <F1>e2 shell -s pmount /dev/sde2
map <F1>e3 shell -s pmount /dev/sde3
map <F1>e4 shell -s pmount /dev/sde4
map <F1>f1 shell -s pmount /dev/sdf1
map <F1>f2 shell -s pmount /dev/sdf2
map <F1>f3 shell -s pmount /dev/sdf3
map <F1>f4 shell -s pmount /dev/sdf4
map <F1>g1 shell -s pmount /dev/sdg1
map <F1>g2 shell -s pmount /dev/sdg2
map <F1>g3 shell -s pmount /dev/sdg3
map <F1>g4 shell -s pmount /dev/sdg4

map <F1>s  shell -s pmount /dev/mmcblk0p1           #mount SD card
map ,uu  shell -s pumount %f
map ,u1  shell -r umount %f
map ,u2 console shell -r umount -l %f   #lazy umount -if busy
map ej	shell -s eject %s             #eject selected external volumes (safely remove)
copymap ej <F8>

map <F1><f1>  shell -pw lsblk       #list partitions +mounts
map <F1><f2>  shell -pw df -h        #list partitions with disk usage
map <F1><f3>  shell -pwr blkid            #list partitions with UUID
map <F1><f4>  shell -pwr fdisk -l       #list partitions +details
</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br>
There's a pmount plugin <a href="https://github.com/Vifon/ranger/commit/6e8f001cd21558fcadc5e15cbb0b1155b0dab9c0">written by vifon</a> which uses Alt-m {x} {n} to mount, but my pumount %f has got to be faster for unmounting


<br>
<br><br>
<h3 id="nfs" class="tag">map comma-n for mounting nfs</h3>
<form><textarea name="T" id="file" rows="9" cols="80">
##### nfs ##########

map ,nr  shell -ftr /etc/init.d/nfs-kernel-server restart
map ,nm  shell -r mount 10.0.0.1:/ ~/Shared
map ,n1  console shell -r mount 10.0.0.1:/home/? ~/Shared
map ,n2  shell -r mount 10.0.0.1:/media/D1 ~/Shared
map ,n3  shell -r mount 10.0.0.1:/media/D2 ~/Shared
map ,nu  shell -r umount %f</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="git" class="tag">map J for Jekyll and Github commands</h3>
<form><textarea name="T" id="file" rows="10" cols="100">
##### Github-jekyll ##########

map Js  shell -ft jekyll serve --watch --baseurl 
map Jc  console shell -ft git commit -a -m "updating pages"
map Ja  console chain shell -ft git add . ; shell git commit -a -m "updating pages"
map Jf  console shell -ft git add %%s
map Jp  chain shell git config --global credential.helper cache; shell -ft git push
map J1  shell -p git status
map J2  shell -p git log --name-only</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="brn" class="tag">map comma-z for bashburn commands</h3>
<form><textarea name="T" id="file" rows="16" cols="150">
##### bashburn & abcde ##########

map ,z1  shell ln -s %p ~/Projects/bashburn/burn/           #make a symlink to selected dirs/files in bashburn dir
map ,z2  cd ~/Projects/bashburn/burn                         #cd to the bashburn work dir (I changed it from /tmp/burn)
map ,z3  console shell -r sh ~/scripts/bashburn-links ?      
            #move links in bashburn temp to a session dir (replace ? with a dir name)  
map ,zX  console shell rm -r ~/Projects/bashburn/burn/*           #delete contents from bashburn temp
map ,z4  shell -r cp %s ~/Projects/bashburn/burn/             #add links from a session to bashburn tmp dir
map ,zb shell -ft bashburn

map ,za shell -ft abcde
map ,zA1 shell cp ~/.abcde/conf-ogg ~/.abcde.conf
map ,zA2 shell cp ~/.abcde/conf-mp3 ~/.abcde.conf</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br>
script for ,z3 "bashburn-links"

<form><textarea name="T" id="file" rows="5" cols="100">
#!/bin/bash 
mkdir -p ~/Projects/bashburn/"$1" 
sudo mv ~/Projects/bashburn/burn/* ~/Projects/bashburn/"$1"/ 
 
# (1st in bashburn, change temp dir to your project dir)</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>



<br><br>
<h3 id="gpg" class="tag">map G for GPG encryption commands</h3>
<form><textarea name="T" id="file" rows="8" cols="100">
##### encrypt ##########

#if not encrypting to default recipient (set in gpg config file) must add -r name or email
map Ge   shell -ft gpg2 -es %f
map Gd   shell -ft gpg2 -d %f
map Gce  shell -ft xsel -b -o | gpg2 -es | xsel --clipboard
map Gcd  shell -ft xsel -b -o | gpg2 -d | xsel --clipboard</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br>

<h3 id="batch" class="tag">map R for file renaming commands</h3>

<span class="bblue">Rr</span>: replace, <span class="bblue">Rs</span>: find spaces, <span class="bblue">Ru</span>: change case, <span class="bblue">Rp</span>: prepend, <span class="bblue">Ra</span>: append, <span class="bblue">Re</span>: exif date, <span class="bblue">Rn</span>: numbering, <span class="bblue">Rc</span>: cut
<br><br>
Here's my complete Ranger renaming tool that just might take care of all your needs for naming files! 
<br><br>
You might want to have these printed on a sheet because some commands are too long and a #comment will not be seen.  You should also run some tests on dummy files - don't assume that they all work perfectly!!!
<br><br>

<form><textarea name="T" id="file" rows="72" cols="155">
###################################
##### batch renaming ##########


#replacing
map Rr1 console -p20 shell -fs rename 's/?/@/g' %%s         
#replace string - ?=old @=new, \ looks in extension ie 's/\?/\@/',  mode: file-?ame.ext > file-@ame.ext

map Rr2  console -p54 shell find . -depth -name "* *" -execdir prename -n 'y/?/@/' {} +  
                #replace recurs - ?=old @=new

map Rs1  console shell -fs rename 's/ /_/g' %s    
                # replace spaces with _ in selected file names

map Rs2  console shell -fs find . -depth -name "* *" -execdir rename 's/ /_/g' "{}" \;     
                 # replace spaces with _ recursively from current location  

map Ru1  shell rename 'y/a-z/A-Z/' %s                #change lower case letters to upper case
 
map Ru2  shell rename 'y/A-Z/a-z/' %s                 #change upper case letters to lower case

#prepending
map Rp1  console -p22 shell -fs rename 's/^/P/' %%s		
                  #Prepend to file names -change P, mode: file-name.ext > Pfile-name.ext

map Rp2  console -p58 shell -fs i=1; for file in %%s; do mv "$file" $(printf "%0.3d$file" $i); i=$((i+1)); done		
                  #prepend numbering: i=1 start from, 3d =digits, +1 =step, mode: file-name1.ext > 001file-name1.ext, file-name2.ext > 002file-name2.ext

#appending
map Ra1  console -p27 shell -fs rename 's/\.(.*)/A.$1/' %%s
                  #Append to file names inside the ext -change A, mode: file-name.ext > file-nameA.ext

map Ra2  console -p22 shell -fs rename 's/$/A/' %%s	
                  #Append to file names without ext, or after ext -change A, mode: file-name > file-nameA

map Ra3  shell -fs sh ~/scripts/append-date                   
                  #append modified date to all file names in dir (script below), mode: file-name.ext > file-name_130825-1520.ext  

map Ra4 	shell -fs sh ~/scripts/append-number %s 	
                  #append numbering to selected files (only with ext) (script below), mode: file-name.ext > file-name_001.ext, file-name_002.ext

#inserting
map Ri1 console -p53 shell -fs for file in %%s ; do mv "$file" "${file:0:n}?${file:n}" ; done
						#insert string: n=at character (set both n's), ?=string
map Rir shell -fs rename 's/IMG//' %s; for file in %s ; do mv "$file" "${file:0:8}-${file:8}" ; done


#exif date
map Re1  shell -fs sh ~/scripts/exif-date-prepend	
                  #Prepend exif date to file name  - need exiftool, mode: file-name.ext > 120806-1134_file-name.ext

map Re2  shell -fs ~/scripts/exif-date-append
                  #Append exif date to file names inside ext, mode: file-name.ext > file-name_120806-1134.ext

map Re3  shell -fs sh ~/scripts/exifdate-name %s       
                #Rename files from exif date, mode: DSC_4322.JPG > 150812-163544.JPG

#sequential numbering
map Rn console -p55 shell -fs i=1; for file in %%s; do mv "$file" $(printf "N_%0.3d.${file##*.}" $i); i=$((i+1)); done		
                  #sequential numbering: i=1 =start from, 3d =digits, +1 =step, N =name, mode: file-name.ext > new-name_000.ext, new-name_001.ext
                  # WARNING: if numbering digits are not correct (e.g. only 1 digit for 12 files) some files will be LOST (overwritten with others)!

#cutting characters
map Rc1  console -p61 shell -fs for file in %%s; do mv "$file" "`echo $file | cut -c2-`"; done		
                  #cut until char 2 of selected file names (ie cut one char only) -change 2,  mode: file-name.ext > ile-name.ext

map Rc2  console -p87 shell -fs for file in *; do mv "$file" "$(echo $file | sed -e 's/\(.*\)[0-9a-zA-Z]\{2\}\.\([^.]*\)/\1.\2/')"; done 			
                  #cut any characters from back of selected file names -change {2,  mode: file-name.ext > file-na.ext</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br>
script for append file modified date (Ra3)
<form><textarea name="T" id="file" rows="2" cols="100">
#!/bin/bash
for file in $@; do mv "$file" "${file%.*}_$( date -r "$file" +%y%m%d-%H%M ).${file##*.}"; done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>
note the use of the parameter <b>$@</b> which will hit all the files passed to bash script, not all the files in dir
<br><br><br>

script for image date prepend (Re1)
<form><textarea name="T" id="file" rows="2" cols="80">
#!/bin/bash
exiftool '-filename<${DateTimeOriginal}_%f.%e' -d %y%m%d-%H%M $@</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>

script for image date append (Re2)
<form><textarea name="T" id="file" rows="2" cols="80">
#!/bin/bash
exiftool '-filename&lt;%f_${DateTimeOriginal}.%e' -d %y%m%d-%H%M $@</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>


script for append numbering (Ra4)
<form><textarea name="T" id="file" rows="3" cols="80">
#!/bin/bash
i=1; for file in $@; do mv "$file" $(printf "${file%.*}_%0.3d.${file##*.}" $i); i=$((i+1)); done</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

i=1 start from, 3d =digits, +1 =step

<br><br>
script for renaming images with date-time (Re3)
<form><textarea name="T" id="file" rows="2" cols="80">
#!/bin/bash
exiftool '-filename<${DateTimeOriginal}.%e' -d %y%m%d-%H%M%S $@</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<br><br><br>
One problem is, however, with so many key-bindings, is the lack of sort-by-key in the command visual.  They are sorted alphabetically by command, and so finding the one you want........ I split the renaming up so as to not fill up R with a huge mix up of commands.

<br><br><br><br>


<h2 id="5" class="tag">Notes on mapping keys</h2>
<div class="bullet"><ul><li> <b>console</b> is used when typing input is necessary, or the mapped command can be altered, such as a pattern or new file name </li>
<li><b>shell</b> must be used in order to run bash commands, and <b>console shell</b> where typing is needed (can use ranger macros and the shell flags)</li>
<li><b>chain</b> allows multiple commands to be run consecutively, each separated by `;`</li>
<li>without using 'console' a key-mapped command will execute immediately, without needing confirmation (in some cases it could be dangerous!)</li>
<li>using <b>%s</b> in the mapping may not be a good idea in some cases, i.e. when the console is opened before executing, because it will expand to all the selected file names, and that would 1. render the console full and impossible to type in, and 2. send utter garbage to a shell command - so we need to use <b>%%s</b> in the key mapping, which remains "%s" on the console, and then shell commands can act on every file.  
<br><br>
Just make sure that if you change a mapping and remove "console" to make it key-executable (only with "shell") then you need to remove the "%%" (i.e. make it "%s" or "%f") or the command will fail.</li>
<li><b>console -p{n}</b> will set the cursor at the nth character in the console, to make it convenient to edit a command, i.e. 'console -p22' will set the cursor at char 22</li>
<li><b>%space</b> is used to ensure a space is inserted after a command, to avoid making uknown commands when space is not put in, e.g. 'console rename%space' </li>

</ul></div>

<br>
<br><br>


<h2 id="6" class="tag">Useful native commands</h2> 
<br>
<span style="font-size: 20; ">search_inc</span>
<table><tr><td width="320"><b>map / console search_inc</b> (space after)</td><td>which searches as you type, but no filtering like scout</td></tr></table>
<br>
<span style="font-size: 20; ">scout</span>
<table><tr><td width="320"><b>map / console scout -ilt</b> (space after)</td><td>hit / and type pattern, searches as you type, missing letters out, can correct your search until right file is selected</td></tr></table>
<br><br>
<h3>scout options as listed in commands.py:</h3>

<table><tr><td style="font-weight: bold; " width="70">-a</td> <td>automatically open a file on unambiguous match</td></tr>
<tr><td style="font-weight: bold; " width="70">-e </td><td>open file on hitting Enter</td></tr>
<tr><td style="font-weight: bold; " width="70">-f </td><td>reduces file list to scout hits, (same as filter command does)</td></tr>
<tr><td style="font-weight: bold; " width="70">-g</td> <td>interpret pattern as a glob pattern</td></tr>
<tr><td style="font-weight: bold; " width="70">-i </td><td>ignore case</td></tr>
<tr><td style="font-weight: bold; " width="70">-k</td> <td>keep the console open when changing a directory with the command</td></tr>
<tr><td style="font-weight: bold; " width="70">-l</td> <td>letter skipping; e.g. allow "rdme" to match the file "readme"</td></tr>
<tr><td style="font-weight: bold; " width="70">-m </td><td>mark the matching files on hitting Enter</td></tr>
<tr><td style="font-weight: bold; " width="70">-M </td><td>unmark the matching files on hitting enter</td></tr>
<tr><td style="font-weight: bold; " width="70">-p </td><td>permanent filter on hitting Enter (unmatched files stay hidden)</td></tr>
<tr><td style="font-weight: bold; " width="70">-s </td><td>smart case: lower case hits all, uppercase hits only uppercase</td></tr>
<tr><td style="font-weight: bold; " width="70">-t </td><td>searches as you type</td></tr>
<tr><td style="font-weight: bold; " width="70">-v</td><td> inverts the match</td></tr></table>
<br><br>
<h3>ready-made Ranger aliases for the `scout` command</h3>

<table><tr><td width="160">alias filter     </td><td>scout -iprt</td></tr>
<tr><td>alias find       </td><td>scout -aet</td></tr>
<tr><td>alias mark       </td><td>scout -mr</td></tr>
<tr><td>alias unmark     </td><td>scout -Mr</td></tr>
<tr><td>alias search     </td><td>scout -rts</td></tr>
<tr><td>alias travel     </td><td>scout -aefikst</td></tr></table>
    
<br><br>

<span style="font-size: 20; ">filter</span>
<table><tr><td width="320"><b>map | console filter%space</b></td><td> followed by any string, filters file names, including extensions, case-sensitive</td></tr></table>
<br><br>
<span style="font-size: 20; ">travel</span>
<table><tr><td width="320"><b>map \[ travel%space</b></td> <td>pretty much does `scout -efklt ` which will navigate into the dir filtered by typing part of a dir name, when Enter is pressed, and the console is kept open to allow you to search for the next dir to enter</td></tr></table>
<br><br>

<span style="font-size: 20; ">enter_bookmark</span>
<table><tr><td width="320"><b>map &#60;a-a> enter_bookmark a </b>  </td> <td>will map Alt-a to go to bookmark a (same as using the ' with its list of bookmarks but more permanent)</td></tr></table>


<br><br><br>

<h3>find tagged files</h3>
<div class="bullet"><ul><li> quickly go to tagged files in dir with <b>ct</b> and <b>n</b></li>
<li>use the %t macro to execute a command on all tagged files in dir</li>
<li>show the "tagged" file with, e.g.</li>
</ul></div>
<br>
<table> <tr> <td >map f" shell -p less ~/.config/ranger/tagged</td></tr></table>

<br><br>
<h3>set nano as editor</h3>
add this line to the end of your ~/.bashrc file<br>
<form><textarea name="T" id="file" rows="1" cols="30">
export EDITOR=nano</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br><br>

<h2 id="6a" class="tag">Adjusting rifle</h2>

To change how different files types are opened (or the numbered choices when you hit 'r') you need to look in Ranger's <b>rifle.conf</b> file
<br><br>
Open images in feh, fullscreen, slideshow with progress to next, change the line to this,
<form><textarea name="T" id="file" rows="2" cols="80">
mime ^image, has feh,    X, flag f = feh -dFZ --start-at "$(basename "$1")" *</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br>
Change how audio files open, in a new terminal window

<form><textarea name="T" id="file" rows="1" cols="80">
mime ^audio,  has mplayer, X, flag f  = urxvt -e mplayer -fs -- "$@"</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>
Opening office docs, set the version you are using, e.g. 
<form><textarea name="T" id="file" rows="2" cols="100">
ext od[dfgpst]|docx?|sxc|xlsx?|xlt|xlw|gnm|gnumeric, has libreoffice4.4, X, flag f = libreoffice4.4 "$@"</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>




<br><br><br>

<h2 id="7" class="tag">In-line preview of images</h2> 
To have images showing in the pager at right of file list, first install <span class="inst">w3m w3m-img</span>
then enable image preview "set preview_images true" in conf.rc
<br><br>
To show image preview for videos, you must first install <span class="inst">ffmpegthumbnailer</span> and you need to uncomment the two lines starting "###video/*)" in scope.sh (and make sure you copy the Ranger 1.7 scope file to ranger config dir)
<br><br>
This only works with rxvt, rxvt-unicode, and xterm terminals - so I advise switching to URxvt.  See my <a href="urxvt.html">Rxvt-unicode</a> page

<br><br><br><br>

<h2 id="8" class="tag">Refine the info displayed for image files</h2>
To refine the info shown in pager for image files (because otherwise there's way too much info there and it runs off the screen and you don't want to hit `i` every time you need a useful exif data), add this line to <b>scope.sh</b> in ~/.config/ranger, for image mimetype:
<br><br>
Note, this is the newer version, for the 2016-12 Ranger git master 
<form><textarea name="T" id="file" rows="4" cols="120">
exiftool -f -filename -filesize -datetimeoriginal -modifydate -imagesize -aperture -shutterspeed -iso -focallength -model -lensid -shuttercount -subject -hierarchicalsubject -comment -rating -label -GPSposition -GPSaltitude "${FILE_PATH}" | sed 's/: -//;s/     ://;s/GP S/GPS /;s/Above Sea Level/asl/;'; exit 5 
	    exit 1;;</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


<br><br><br>

<h2 id="9" class="tag">Refine the info displayed for video/audio files</h2>
I have mediainfo commands that can go in scope.sh file as well, and if you want to add more tags to the commands, you need to run 

<form><textarea name="T" id="cmd" rows="1" cols="50">
mediainfo --info-parameters >mediainfo-tags </textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>
to put all the available tags into a file - and read that file to see what you can use - test them with:
<br><br>
mediainfo --inform="<span style="color: #2D46CF; "><b>group</b></span>;%<span style="color: #2D46CF; "><b>tag</b></span>%" <span style="color: #2D46CF; "><b>file</b></span>
<br><br>


mediainfo commands will print any extra characters placed outside the `%<i>tag</i>%` in the output, so I add some to denote tabs (>) and line breaks (^) and pipe the output to sed which converts them to real tab spaces and line breaks before sending to pager, so that the info that mediainfo returns from a file will be displayed nicely.. now that's clever :^)
<br><br>

Note, this is the newer version again..
<form><textarea name="T" id="file" rows="23" cols="150">
    video/*)
        mediainfo --inform="General;General^---------------------------------------------- ^File Name>>>%FileName%.%FileExtension% ^Date Modified>>%File_Modified_Date_Local% ^File Size>>>%FileSize/String% ^Format>>>>%Format% ^Encoder>>>>%Encoded_Application%" "${FILE_PATH}"  | sed 's/\^/\n/g;s/>/\t/g';         
mediainfo --inform="Video;^Video^---------------------------------------------- ^Encoding>>>%Encoded_Library% ^Standard>>>%Standard% ^Avrg BitRate>>%BitRate/String% ^Max BitRate>>>%BitRate_Maximum/String% ^Width>>>>%Width% ^Height>>>>%Height% ^Aspect Ratio>>%DisplayAspectRatio%/%DisplayAspectRatio/String% ^Pixel Ratio>>>%PixelAspectRatio% ^Frame Rate>>>%FrameRate/String% ^Frame Count>>>%FrameCount% ^Duration>>>%Duration/String3%" "${FILE_PATH}"  | sed 's/\^/\n/g;s/>/\t/g';      
mediainfo --inform="Audio;^Audio^---------------------------------------------- ^Format>>>>%Format% ^Muxing>>>>%MuxingMode% ^BitRate>>>>%BitRate/String% ^Maximum BitRate>>%BitRate_Maximum/String% ^Channel(s)>>>%Channel(s)% ^Sample Rate>>>%SamplingRate/String% ^Duration>>>%Duration/String3%" "${FILE_PATH}" | sed 's/\^/\n/g;s/>/\t/g'; exit 5
	exit 1;;
    audio/*)
        mediainfo --inform="General;General^---------------------------------------------- ^File Name>>>%FileName%.%FileExtension% ^Date Modified>>%File_Modified_Date_Local% ^File Size>>>%FileSize/String% ^Album>>>>%Album% ^Track Name>>>%Track% ^Track No.>>>%Track/Position%/%Track/Position_Total% ^Artist>>>>%Performer% ^Genre>>>>%Genre% ^Encoder>>>>%Encoded_Library%" "${FILE_PATH}"  | sed 's/\^/\n/g;s/>/\t/g'; 
        mediainfo --inform="Audio;^Audio^---------------------------------------------- ^Format>>>>%Format% ^Profile>>>>%Format_Profile% ^Mode>>>>%Format_Settings_Mode% ^BitRate>>>>%BitRate/String% ^Channel(s)>>>%Channel(s)% ^Sample Rate>>>%SamplingRate/String% ^Compression>>>%Compression_Mode% ^Duration>>>%Duration/String3%" "${FILE_PATH}" | sed 's/\^/\n/g;s/>/\t/g';  exit 5
	exit 1;;
    esac</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

(this all goes inside the mimetype "case" section, between lines "case" and "esac")
<br><br>
Note that "File_Modified_Date_Local" shows the date in local time, but "File_Modified_Date" shows it in UTC (GMT).
<br><br><br>

If certain file extensions don't show any info (eg ogg previously with ranger 1.6), you need to add a new case section:

<form><textarea name="T" id="file" rows="5" cols="80">
case "$extension" in
    ogg)
 mediainfo --inform="General;General.................
 ................................
esac</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br>
then you hit 'zi' (`set preview_images!` as of 2016-12, or my zx key) to switch from preview to details - though you need to refresh the dir with Ctrl-r :(


<br><br><br><br>

<h2 id="10" class="tag">Integrate system trash with bash</h2>
download the zipped file from git (on the right of page) <a href="https://github.com/andreafrancia/trash-cli">https://github.com/andreafrancia/trash-cli</a>
<br><br>
unzip it, enter the dir and run
<form><textarea name="T" id="cmd" rows="1" cols="30">
sudo python setup.py install</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br>
<h3>trash-cli commands</h3>

<table cellpadding="2"><tr><td width="120">trash-put                     </td><td>trashes files and directories</td></tr>
<tr><td>trash-empty                </td><td>empty the trashcan(s). use flag --shred to wipe it</td></tr>
<tr><td>trash-list                      </td><td>list trashed file</td></tr>
<tr><td>restore-trash               </td><td>restore a trashed file (trashed from the current dir)</td></tr>
<tr><td>trash-rm                      </td><td>remove individual files from trash can</td></tr>
<tr><td>trash-empty 7		  </td><td>empties files trashed more than 7 days ago</td></tr></table>
<br><br>
with ranger, map the delete key - map <DELETE> shell -s trash-put %s<br>
works a charm!
<br><br>
bookmark ~/.local/share/Trash/files to easily retrieve files
<br><br>
or you could map keys to the trash places for each disk partition, use `shell cd`
<br><br>
then to restore a file, select and yank with yy, then hit h (I change history key to lower case h from H) to return to the dir you just deleted the file, and pp to drop the file back and restore it there.

<br><br><br><br>

<h2 id="11" class="tag">UI enhancements!</h2>
<h3>1. Remove "user@host" from the title bar</h3>
<div class="bullet"><ul><li>in ranger type `g R`</li>
<li>navigate to gui/widgets/ and highlight titlebar.py</li>
<li>type exactly: `@ gksu leafpad` <Enter></li>
<li>or if you have leafpad/editor mapped to a key, e.g. my `shell -f gksu leafpad %s` is mapped to Ps</li>

<li>in the file comment these lines (#), then save and quit/restart ranger</li></ul></div>
<form><textarea name="T" id="file" rows="4" cols="80">
        #bar.add(self.fm.username, 'hostname', clr, fixed=True)
        #bar.add('@', 'hostname', clr, fixed=True)
        #bar.add(self.fm.hostname, 'hostname', clr, fixed=True)
        #bar.add(':', 'hostname', clr, fixed=True)</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br><br>
<h3>2. Adjust colour of title bar (dir path)</h3>
<div class="bullet"><ul><li>rsync -r /usr/local/lib/python2.7/dist-packages/ranger/colorschemes</li>
 ~/.config/ranger/
<li>or in ranger type `gR`, `yy` on colorschemes and `pp` in ~/.config/ranger/</li>

<li>edit the color scheme default (backup first)</li>

<li>under "context.titlebar"</li></ul></div>

<form><textarea name="T" id="file" rows="7" cols="80">
	    elif context.directory:
                fg = cyanx
	    elif context.file:
                fg = black
            elif context.tab:
                if context.good:
                    bg = blue</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>


indent must be exact<br>
change white in tab??

<br><br><br><br>

<h2 id="12" class="tag">Mounting and browsing an android device </h2>

<br><br>

<h3>1. using SSH and the phone's wifi hotspot </h3>

<div class="bullet"><ul><li>get "SSHFS Droid" app</li>
<li>in the app settings: unselect require wifi, change p/w</li>
<li>start the ssh server with the app, and run the wifi hotspot</li>
<li>connect to the android hotspot on the linux box</li>
<li>make a directory to mount the device on with, e.g.</li>

<form><textarea name="T" id="cmd" rows="1" cols="30">
sudo mkdir /mnt/j1</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<li>enable allow_other in /etc/fuse.conf</li>
<li>mount the android device with the command (noting the ip address that SSHFS Droid gives after linux box connects to the hotspot - in my case 192.168.43.1:2222) <b>- this will vary every time if mobile data is turned on! (so turn it off)</b></li>

<form><textarea name="T" id="cmd" rows="1" cols="80">
sudo sshfs -d root@192.168.43.1:/storage /mnt/phone -p2222 -o allow_other</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<li>now the device will be mounted at /mnt/phone, with /storage (i.e. SDcard, extSDcard) at top level</li>

<li>normal sshfs unmount is with </li>

<form><textarea name="T" id="cmd" rows="1" cols="30">
sudo fusermount -u /mnt/phone</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<li>But Ctrl-C in the active sshfs window works to unmount ok.</li></ul></div>

<br><br>
<b>Ranger mapping: </b>

<form><textarea name="T" id="file" rows="2" cols="100">
map ,ssj1 shell -str sshfs -d root@192.168.43.1:/storage /mnt/j1 -p2222 -o allow_other
map ,ssju shell -r sudo  fusermount -u /mnt/j1</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>

<h3>2. using mtp connection via usb cable </h3>

<div class="bullet"><ul><li>install mtp
<form><textarea name="T" id="install" rows="1" cols="50">
sudo apt-get install mtp-tools go-mtpfs</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<li>make a dir in user home for a mount point 
<li>then connect the phone via usb and set file transfer to mtp
<li>run `go-mtpfs ~/mount-point-dir`
<li>unmount the device with `fusermount -u ~/mount-point-dir`
<br>
</li></ul></div>
<br>
The following commands are used for checking the android's connection, and may not be necessary for connecting, but if the device will not mount, try detecting it first:
<form><textarea name="T" id="cmd" rows="2" cols="30">
mtp-detect
mtp-connect</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>

<br>
<b>Ranger mapping: </b>

<form><textarea name="T" id="file" rows="4" cols="80">
map ,td  shell -st mtp-detect
map ,tc  shell -st mtp-connect
map ,tg shell -f go-mtpfs %f		# highlight the mount-point dir
map ,tu shell -f fusermount -u %f</textarea>
&nbsp;<input type="button" class="submitLink" value="Select all" onClick="javascript:this.form.T.focus();this.form.T.select();">
</form>
<br><br>

<br><br><br><br>

<h3><span class="bblue">Got there! Now go ahead and enjoy some real file management!</span></h3>


<br><br><br>
<b>Next page: 
<br><br>
<a style="font-size: 1.2em; " href="firewall.html">Firewall</a> - setting the network traffic firewall using iptables</b>
<br><br>
</div>
